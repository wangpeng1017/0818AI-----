# Vercelé…ç½®ä¿®å¤è¯´æ˜ ğŸ”§

## é—®é¢˜æè¿°

åœ¨vercel.jsonæ–‡ä»¶ä¸­ï¼Œ`functions`å±æ€§å’Œ`builds`å±æ€§ä¸èƒ½åŒæ—¶ä½¿ç”¨ã€‚Vercelç°åœ¨æ¨èä½¿ç”¨`functions`å±æ€§æ¥é…ç½®Serverless Functionsï¼Œè€Œ`builds`å±æ€§å·²è¢«å¼ƒç”¨ã€‚

## ä¿®å¤å†…å®¹

### 1. ç§»é™¤å·²å¼ƒç”¨çš„buildsé…ç½®

**ä¿®å¤å‰**ï¼š
```json
{
  "version": 2,
  "name": "xiaopenyou-knowledge-cards",
  "builds": [
    {
      "src": "api/**/*.js",
      "use": "@vercel/node"
    }
  ],
  "functions": {
    "api/generate-card.js": {
      "maxDuration": 30
    }
  }
}
```

**ä¿®å¤å**ï¼š
```json
{
  "version": 2,
  "name": "xiaopenyou-knowledge-cards",
  "functions": {
    "api/generate-card.js": {
      "maxDuration": 30
    }
  }
}
```

### 2. ä¿ç•™çš„é…ç½®é¡¹

âœ… **functionsé…ç½®**ï¼šç”¨äºè®¾ç½®Serverless Functionsçš„è¿è¡Œæ—¶å‚æ•°
- `maxDuration: 30` - APIå‡½æ•°æœ€å¤§æ‰§è¡Œæ—¶é—´30ç§’

âœ… **headersé…ç½®**ï¼šç”¨äºè®¾ç½®CORSå¤´
- å…è®¸è·¨åŸŸè®¿é—®
- æ”¯æŒæ‰€æœ‰HTTPæ–¹æ³•
- æ­£ç¡®çš„è¯·æ±‚å¤´é…ç½®

âœ… **rewritesé…ç½®**ï¼šç”¨äºURLé‡å†™
- æ ¹è·¯å¾„é‡å®šå‘åˆ°index.html

## éªŒè¯ç»“æœ

### é…ç½®æ£€æŸ¥è„šæœ¬
åˆ›å»ºäº† `scripts/deploy-check.js` è„šæœ¬æ¥éªŒè¯é…ç½®ï¼š

```bash
node scripts/deploy-check.js
```

**æ£€æŸ¥ç»“æœ**ï¼š
```
ğŸ” å¼€å§‹éƒ¨ç½²å‰é…ç½®æ£€æŸ¥...

ğŸ“ æ£€æŸ¥å¿…è¦æ–‡ä»¶...
âœ… æ‰€æœ‰å¿…è¦æ–‡ä»¶å­˜åœ¨

âš™ï¸ æ£€æŸ¥vercel.jsoné…ç½®...
âœ… functionsé…ç½®å­˜åœ¨
âœ… APIå‡½æ•°é…ç½®: maxDuration=30s
âœ… CORSå¤´é…ç½®å­˜åœ¨
âœ… URLé‡å†™è§„åˆ™å­˜åœ¨

ğŸ“¦ æ£€æŸ¥package.json...
âœ… é¡¹ç›®é…ç½®æ­£ç¡®

ğŸ” æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®...
âœ… ç¯å¢ƒå˜é‡ç¤ºä¾‹å­˜åœ¨

ğŸ¤– æ£€æŸ¥APIæ–‡ä»¶...
âœ… APIå‡½æ•°æ ¼å¼æ­£ç¡®

ğŸ‰ é…ç½®æ£€æŸ¥å®Œæˆï¼
```

### JSONæ ¼å¼éªŒè¯
```bash
node -e "const config = require('./vercel.json'); console.log('âœ… vercel.jsonæ ¼å¼éªŒè¯é€šè¿‡');"
```

## éƒ¨ç½²æµç¨‹

### 1. éƒ¨ç½²å‰æ£€æŸ¥
```bash
node scripts/deploy-check.js
```

### 2. è®¾ç½®ç¯å¢ƒå˜é‡
```bash
vercel env add GLM_API_KEY
# è¾“å…¥: c86f3e09702947fcb3b1d65b5c4d349a.KIQaMpAZlWdKrzsg
```

### 3. æ‰§è¡Œéƒ¨ç½²
```bash
vercel --prod
```

### 4. å¿«é€Ÿéƒ¨ç½²ï¼ˆå¯é€‰ï¼‰
```bash
chmod +x scripts/quick-deploy.sh
./scripts/quick-deploy.sh
```

## æŠ€æœ¯è¯´æ˜

### Vercel Functions vs Builds

**æ—§æ–¹å¼ï¼ˆbuildsï¼‰**ï¼š
- éœ€è¦æ˜¾å¼æŒ‡å®šæ„å»ºé…ç½®
- é…ç½®å¤æ‚ï¼Œå®¹æ˜“å‡ºé”™
- å·²è¢«Vercelå¼ƒç”¨

**æ–°æ–¹å¼ï¼ˆfunctionsï¼‰**ï¼š
- è‡ªåŠ¨æ£€æµ‹APIæ–‡ä»¶
- é…ç½®ç®€å•æ˜äº†
- Vercelå®˜æ–¹æ¨è

### é…ç½®ä¼˜åŠ¿

1. **ç®€åŒ–é…ç½®**ï¼šç§»é™¤äº†ä¸å¿…è¦çš„buildsé…ç½®
2. **å®˜æ–¹æ¨è**ï¼šä½¿ç”¨Vercelæœ€æ–°çš„é…ç½®æ ‡å‡†
3. **è‡ªåŠ¨æ£€æµ‹**ï¼šVercelä¼šè‡ªåŠ¨æ£€æµ‹apiç›®å½•ä¸‹çš„å‡½æ•°
4. **æ›´å¥½ç»´æŠ¤**ï¼šé…ç½®æ›´ç®€æ´ï¼Œæ˜“äºç»´æŠ¤

## ç›¸å…³æ–‡æ¡£æ›´æ–°

### æ›´æ–°çš„æ–‡ä»¶
- âœ… `vercel.json` - ç§»é™¤buildsé…ç½®
- âœ… `DEPLOYMENT.md` - æ›´æ–°éƒ¨ç½²è¯´æ˜
- âœ… `README.md` - æ·»åŠ ä¿®å¤è¯´æ˜
- âœ… `PROJECT_SUMMARY.md` - è®°å½•ä¿®å¤å†…å®¹
- âœ… `scripts/deploy-check.js` - æ–°å¢é…ç½®æ£€æŸ¥è„šæœ¬
- âœ… `scripts/quick-deploy.sh` - æ–°å¢å¿«é€Ÿéƒ¨ç½²è„šæœ¬

### æ–‡æ¡£è¯´æ˜
æ‰€æœ‰ç›¸å…³æ–‡æ¡£éƒ½å·²æ›´æ–°ï¼ŒåŒ…å«äº†æœ€æ–°çš„é…ç½®è¯´æ˜å’Œéƒ¨ç½²æµç¨‹ã€‚

## æµ‹è¯•å»ºè®®

### æœ¬åœ°æµ‹è¯•
```bash
# å®‰è£…ä¾èµ–
npm install

# æœ¬åœ°å¼€å‘
vercel dev

# è®¿é—®æµ‹è¯•
open http://localhost:3000
```

### éƒ¨ç½²æµ‹è¯•
1. æ‰§è¡Œéƒ¨ç½²å‰æ£€æŸ¥
2. è®¾ç½®ç¯å¢ƒå˜é‡
3. éƒ¨ç½²åˆ°Vercel
4. éªŒè¯æ‰€æœ‰åŠŸèƒ½æ­£å¸¸

## æœ€æ–°ä¿®å¤ï¼šè¾“å‡ºç›®å½•é…ç½®

### é—®é¢˜æè¿°
éƒ¨ç½²æ—¶å‡ºç°é”™è¯¯ï¼š`Error: No Output Directory named "public" found after the Build completed`

### è§£å†³æ–¹æ¡ˆ
åœ¨vercel.jsonä¸­æ·»åŠ äº†ä»¥ä¸‹é…ç½®ï¼š
```json
{
  "buildCommand": "npm run build",
  "outputDirectory": ".",
  "installCommand": "npm install"
}
```

### é…ç½®è¯´æ˜
- `outputDirectory: "."` - æŒ‡å®šè¾“å‡ºç›®å½•ä¸ºæ ¹ç›®å½•
- `buildCommand: "npm run build"` - æŒ‡å®šæ„å»ºå‘½ä»¤
- `installCommand: "npm install"` - æŒ‡å®šå®‰è£…å‘½ä»¤

## æ€»ç»“

âœ… **é—®é¢˜å·²è§£å†³**ï¼šç§»é™¤äº†å†²çªçš„buildsé…ç½®
âœ… **é…ç½®ä¼˜åŒ–**ï¼šä½¿ç”¨Vercelæ¨èçš„functionsé…ç½®
âœ… **è¾“å‡ºç›®å½•ä¿®å¤**ï¼šæ·»åŠ äº†æ­£ç¡®çš„outputDirectoryé…ç½®
âœ… **éªŒè¯é€šè¿‡**ï¼šæ‰€æœ‰æ£€æŸ¥é¡¹ç›®å‡é€šè¿‡
âœ… **æ–‡æ¡£å®Œå–„**ï¼šæ›´æ–°äº†æ‰€æœ‰ç›¸å…³æ–‡æ¡£
âœ… **å·¥å…·å®Œå¤‡**ï¼šæä¾›äº†æ£€æŸ¥å’Œéƒ¨ç½²è„šæœ¬

é¡¹ç›®ç°åœ¨å¯ä»¥æ­£å¸¸éƒ¨ç½²åˆ°Vercelï¼Œæ‰€æœ‰é…ç½®éƒ½ç¬¦åˆæœ€æ–°æ ‡å‡†ï¼ğŸ‰
